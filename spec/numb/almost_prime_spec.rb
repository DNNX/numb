describe Integer, "#almost_prime?" do

  @seq = {
    # A000040 
    1 => [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,
          61,67,71,73,79,83,89,97,101,103,107,109,113,127,
          131,137,139,149,151,157,163,167,173,179,181,191,
          193,197,199,211,223,227,229,233,239,241,251,257,
          263,269,271],
    # A001358      
    2 => [4,6,9,10,14,15,21,22,25,26,33,34,35,38,39,46,49,
          51,55,57,58,62,65,69,74,77,82,85,86,87,91,93,94,
          95,106,111,115,118,119,121,122,123,129,133,134,
          141,142,143,145,146,155,158,159,161,166,169,177,
          178,183,185,187],
    # A014612 
    3 => [8,12,18,20,27,28,30,42,44,45,50,52,63,66,68,70,
          75,76,78,92,98,99,102,105,110,114,116,117,124,125,
          130,138,147,148,153,154,164,165,170,171,172,174,
          175,182,186,188,190,195,207,212,222,230,231,236,
          238,242,244],
    # A014613      
    4 => [16,24,36,40,54,56,60,81,84,88,90,100,104,126,132,
          135,136,140,150,152,156,184,189,196,198,204,210,
          220,225,228,232,234,248,250,260,276,294,296,297,
          306,308,315,328,330,340,342,344,348,350,351,364,
          372,375,376],
    # A014614      
    5 => [32,48,72,80,108,112,120,162,168,176,180,200,208,
          243,252,264,270,272,280,300,304,312,368,378,392,
          396,405,408,420,440,450,456,464,468,496,500,520,
          552,567,588,592,594,612,616,630,656,660,675,680,
          684,688,696],
    # A046306      
    6 => [64,96,144,160,216,224,240,324,336,352,360,400,
          416,486,504,528,540,544,560,600,608,624,729,736,
          756,784,792,810,816,840,880,900,912,928,936,992,
          1000,1040,1104,1134,1176,1184,1188,1215,1224,1232,
          1260,1312,1320],
    # A046308
    7 => [128,192,288,320,432,448,480,648,672,704,720,800,
          832,972,1008,1056,1080,1088,1120,1200,1216,1248,
          1458,1472,1512,1568,1584,1620,1632,1680,1760,1800,
          1824,1856,1872,1984,2000,2080,2187,2208,2268,2352,
          2368,2376],
    # A046310       
    8 => [256,384,576,640,864,896,960,1296,1344,1408,1440,
          1600,1664,1944,2016,2112,2160,2176,2240,2400,2432,
          2496,2916,2944,3024,3136,3168,3240,3264,3360,3520,
          3600,3648,3712,3744,3968,4000,4160,4374,4416,4536,
          4704,4736],
    # A046312 
    9 => [512,768,1152,1280,1728,1792,1920,2592,2688,2816,
          2880,3200,3328,3888,4032,4224,4320,4352,4480,4800,
          4864,4992,5832,5888,6048,6272,6336,6480,6528,6720,
          7040,7200,7296,7424,7488,7936,8000,8320,8748,8832,
          9072,9408],
  }

  @seq.each do |k, members|
    members.sample(10).each do |n|
      it "should return true for #{k}-almost-prime #{n}" do
        n.almost_prime?(k).should be_true
      end
    end

    members.to_seq.invert.sample(10).each do |n|
      it "should return false for non-#{k}-almost-prime #{n}" do
        n.almost_prime?(k).should be_false
      end
    end
  end
end
